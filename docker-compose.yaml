services:
  clawdbot:
    image: ghcr.io/clawdbot/clawdbot:main
    container_name: clawdbot
    restart: unless-stopped

    environment:
      NODE_ENV: production
      HOME: /home/node
      TERM: xterm-256color

      # Bootstrap controls
      CLAWDBOT_GATEWAY_PORT: "18789"
      CLAWDBOT_AUTO_BOOTSTRAP: "1"
      CLAWDBOT_PRINT_ACCESS: "1"

    volumes:
      - clawdbot-config:/home/node/.clawdbot
      - clawdbot-workspace:/home/node/clawd

    ports:
      - "18789"

    command: ["bash", "/app/scripts/coolify-bootstrap.sh"]

volumes:
  clawdbot-config:
  clawdbot-workspace: